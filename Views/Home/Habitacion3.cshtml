@{
    ViewBag.Title = "Habitacion 3";
}

<script defer src="https://app.embed.im/snow.js"></script>

<h1>Habitación 3 | Sala de Comando Espacial</h1>
<p>Tiempo restante: <span id="contador">00:15:00</span></p>

<img src="https://media.sketchfab.com/models/22c3ec5244aa4f52b7c7ef74061fe4ca/thumbnails/ef2d6862847c45e4b818db46402419b0/d3fc6d2629564205a8f3a802062c141d.jpeg" alt="">

<p>Pista Inicial: Mira a través de las pantallas y encontrarás las claves para desbloquear la siguiente habitación. Observa con atención cada detalle y busca patrones en las imágenes que se muestran</p>

<p>Ingrese el código:</p>

<form method="post" asp-action="Habitacion3">
    <input type="hidden" name="sala" value="3" />
    <input type="text" name="clave" />
    <button type="submit">Validar</button>
</form>

@if (ViewBag.Error != null)
{
    <p class="error">@ViewBag.Error</p>
}

<button type="button" id="btnPistaExtra3">Pista Extra</button>

<p>Vidas Restantes: @ViewBag.VidasRestantes</p>

<script>
    var tiempoTotal = 900; 
    var tiempoRestante = tiempoTotal; 
    var intervalo;

    function iniciarContador() {
    intervalo = setInterval(actualizarContador, 1000);
  }

    function actualizarContador() {
    tiempoRestante--;
    var minutos = Math.floor(tiempoRestante / 60);
    var segundos = tiempoRestante % 60;

    var minutosFormateados = minutos.toString().padStart(2, "0");
    var segundosFormateados = segundos.toString().padStart(2, "0");

    document.getElementById("contador").textContent =
      "00:" + minutosFormateados + ":" + segundosFormateados;

    if (tiempoRestante <= 0) {
      clearInterval(intervalo);
      window.location.href = '@Url.Action("Derrota","Home")';
    }
  }

  window.onload = function () {
    iniciarContador();
  };

  function actualizarTiempoRestante(tiempoPasado) {
    tiempoRestante -= tiempoPasado;
    clearInterval(intervalo);
    intervalo = setInterval(actualizarContador, 1000);
  }

    document.getElementById("btnPistaExtra3").addEventListener("click", function() {
        var mensajePistaExtra = "Recuerden que la clave para desbloquear la siguiente habitación se encuentra oculta en los patrones de las imágenes en las pantallas. Presten atención a los colores, números o símbolos que puedan encontrar. Tal vez necesiten combinar información de diferentes pantallas para resolver el enigma";
        alert(mensajePistaExtra);
    });
</script>

<style>
    body {
        background-color: black;
    }
</style>